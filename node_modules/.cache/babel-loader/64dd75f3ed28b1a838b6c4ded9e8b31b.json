{"ast":null,"code":"import _regeneratorRuntime from\"/Users/laiyiying/Desktop/wp-final-project-deploy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/laiyiying/Desktop/wp-final-project-deploy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/laiyiying/Desktop/wp-final-project-deploy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{GoogleMap,LoadScript,Marker,InfoWindow}from'@react-google-maps/api';import axios from'../../api';import{BrowserRouter as Router,Switch,Route}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MapContainer=function MapContainer(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),selected=_useState2[0],setSelected=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),items=_useState4[0],setItems=_useState4[1];function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$post,_yield$axios$post$dat,messages,message;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post('/api/get-item');case 2:_yield$axios$post=_context.sent;_yield$axios$post$dat=_yield$axios$post.data;messages=_yield$axios$post$dat.messages;message=_yield$axios$post$dat.message;if(!messages)alert(message);else setItems(messages);case 7:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}var onSelect=function onSelect(item){setSelected(item);};// const locations = [\n//     {\n//       name: \"Location 1\",\n//       location: { \n//         lat: 25.019096,\n//         lng: 121.546366\n//       },\n//     },\n//     {\n//       name: \"Location 2\",\n//       location: { \n//         lat: 25.03876,\n//         lng: 121.521604\n//       },\n//     },\n//     {\n//       name: \"Location 3\",\n//       location: { \n//         lat: 25.058547,\n//         lng: 121.563281\n//       },\n//     },\n//   ];\nuseEffect(function(){fetchData();console.log(items);},[]);var mapStyles={height:\"100vh\",width:\"100%\"};var defaultCenter={lat:25.014947,lng:121.535549};return/*#__PURE__*/_jsx(LoadScript,{googleMapsApiKey:\"AIzaSyDlr3jj0FaxiAiqSzwSMwzKnPZwnrV3otE\",children:/*#__PURE__*/_jsxs(GoogleMap,{mapContainerStyle:mapStyles,zoom:13,center:defaultCenter,children:[items.map(function(item){var lat=parseFloat(item.lat);var lng=parseFloat(item.log);item.location={lat:lat,lng:lng};console.log(item.location);return/*#__PURE__*/_jsx(Marker,{position:item.location,onClick:function onClick(){return onSelect(item);}},item.name);}),selected.location&&/*#__PURE__*/_jsx(InfoWindow,{position:selected.location,clickable:true,onCloseClick:function onCloseClick(){return setSelected({});},children:/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u5546\\u5BB6\\u540D\\u7A31\\uFF1A\",selected.traderName,/*#__PURE__*/_jsx(\"br\",{}),\"\\u5546\\u54C1\\uFF1A\",selected.productName,/*#__PURE__*/_jsx(\"br\",{}),\"\\u6578\\u91CF\\uFF1A\",selected.quantity,\"\\u500B\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u7279\\u50F9\\uFF1A\",selected.onSalePrice,\"\\u5143\"]})})]})});};export default MapContainer;","map":{"version":3,"sources":["/Users/laiyiying/Desktop/wp-final-project-deploy/src/containers/pages/GoogleMap.js"],"names":["React","useState","useEffect","GoogleMap","LoadScript","Marker","InfoWindow","axios","BrowserRouter","Router","Switch","Route","MapContainer","selected","setSelected","items","setItems","fetchData","post","data","messages","message","alert","onSelect","item","console","log","mapStyles","height","width","defaultCenter","lat","lng","map","parseFloat","location","name","traderName","productName","quantity","onSalePrice"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { GoogleMap, LoadScript, Marker, InfoWindow  } from '@react-google-maps/api';\nimport axios from '../../api';\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\n\nconst MapContainer = () => {\n  const [ selected, setSelected ] = useState({});\n  const [items, setItems] = useState([]);\n  \n  async function fetchData(){\n    const {\n            data: { messages, message },\n          } = await axios.post('/api/get-item')\n    if (!messages) alert(message);\n    else setItems(messages);\n}\n\n\n  const onSelect = item => {\n      setSelected(item);\n    }\n  // const locations = [\n  //     {\n  //       name: \"Location 1\",\n  //       location: { \n  //         lat: 25.019096,\n  //         lng: 121.546366\n  //       },\n  //     },\n  //     {\n  //       name: \"Location 2\",\n  //       location: { \n  //         lat: 25.03876,\n  //         lng: 121.521604\n  //       },\n  //     },\n  //     {\n  //       name: \"Location 3\",\n  //       location: { \n  //         lat: 25.058547,\n  //         lng: 121.563281\n  //       },\n  //     },\n  //   ];\n  \n\n    useEffect(() => {\n        fetchData()\n        console.log(items)\n\n\n    },[]);\n\nconst mapStyles = {        \n  height: \"100vh\",\n  width: \"100%\"};\n\nconst defaultCenter = {\n  lat:25.014947, lng: 121.535549 \n}\n\nreturn (\n   <LoadScript\n     googleMapsApiKey='AIzaSyDlr3jj0FaxiAiqSzwSMwzKnPZwnrV3otE'>\n      <GoogleMap\n        mapContainerStyle={mapStyles}\n        zoom={13}\n        center={defaultCenter}>\n      {\n          items.map(item => {\n              const lat=parseFloat(item.lat)\n              const lng=parseFloat(item.log)\n              item.location={lat:lat,lng:lng}\n              console.log(item.location)\n            return (\n            <Marker key={item.name} position={item.location}\n            onClick={() => onSelect(item)}/>\n            )\n          })\n       }\n       {\n          selected.location && \n          (\n            <InfoWindow\n            position={selected.location}\n            clickable={true}\n            onCloseClick={() => setSelected({})}\n          >\n            <p>商家名稱：{selected.traderName}<br/>商品：{selected.productName}<br/>數量：{selected.quantity}個<br/>特價：{selected.onSalePrice}元</p>\n          </InfoWindow>\n          )\n       }\n   </GoogleMap>\n   </LoadScript>\n)\n}\n\nexport default MapContainer;\n\n"]},"metadata":{},"sourceType":"module"}