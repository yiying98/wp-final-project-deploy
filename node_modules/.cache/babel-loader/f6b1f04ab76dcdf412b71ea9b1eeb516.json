{"ast":null,"code":"import _regeneratorRuntime from\"/Users/laiyiying/Desktop/wp-final-project-deploy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/laiyiying/Desktop/wp-final-project-deploy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/laiyiying/Desktop/wp-final-project-deploy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import Item from'../../components/Item';import Box from'@material-ui/core/Box';import Grid from\"@material-ui/core/Grid\";import axios from'../../api.js';import{jsx as _jsx}from\"react/jsx-runtime\";export default function HomePage(_ref){var isSearch=_ref.isSearch,searchType=_ref.searchType,searchString=_ref.searchString,setSearch=_ref.setSearch;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),productInfos=_useState2[0],setProductInfos=_useState2[1];// let location = useLocation();\n// console.log(location);\nuseEffect(function(){fetchProductInfos();},[]);var fetchProductInfos=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(searchType,searchString){var queryParams,_yield$axios$get,_yield$axios$get$data,message,productInfo,productInfoObject;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;queryParams={};if(searchType&&searchString)queryParams={searchString:searchString,searchType:searchType};console.log(queryParams);_context.next=6;return axios.get('/api/get-product-info',{params:queryParams});case 6:_yield$axios$get=_context.sent;_yield$axios$get$data=_yield$axios$get.data;message=_yield$axios$get$data.message;productInfo=_yield$axios$get$data.productInfo;productInfoObject=JSON.parse(productInfo);console.log(message);//console.log(productInfoObject);\nsetProductInfos(productInfoObject);_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);throw Error('When fetching product info => Error '+_context.t0);case 18:case\"end\":return _context.stop();}}},_callee,null,[[0,15]]);}));return function fetchProductInfos(_x,_x2){return _ref2.apply(this,arguments);};}();//handle searching\nuseEffect(function(){fetchProductInfos(searchType,searchString);console.log(\"searching\");setSearch(false);},[searchType]);// if (isSearch) {\n//     fetchProductInfos(searchType, searchString);\n//     console.log(\"searching\");\n//     setSearch(false)\n// }\n//handle searching\nreturn/*#__PURE__*/_jsx(Grid,{container:true,direction:\"row\",children:productInfos.map(function(item,index){return/*#__PURE__*/_jsx(Box,{mt:8,mx:2,children:/*#__PURE__*/_jsx(Item,{props:item},index)});})});}","map":{"version":3,"sources":["/Users/laiyiying/Desktop/wp-final-project-deploy/src/containers/pages/Homepage.js"],"names":["React","useEffect","useState","Item","Box","Grid","axios","HomePage","isSearch","searchType","searchString","setSearch","productInfos","setProductInfos","fetchProductInfos","queryParams","console","log","get","params","data","message","productInfo","productInfoObject","JSON","parse","Error","map","item","index"],"mappings":"kfAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,IAAP,KAAiB,uBAAjB,CACA,MAAOC,CAAAA,GAAP,KAAgB,uBAAhB,CAEA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,CAEA,MAAOC,CAAAA,KAAP,KAAkB,cAAlB,C,2CAKA,cAAe,SAASC,CAAAA,QAAT,MAAoE,IAAhDC,CAAAA,QAAgD,MAAhDA,QAAgD,CAAtCC,UAAsC,MAAtCA,UAAsC,CAA1BC,YAA0B,MAA1BA,YAA0B,CAAZC,SAAY,MAAZA,SAAY,eACvCT,QAAQ,CAAC,EAAD,CAD+B,wCACxEU,YADwE,eAC1DC,eAD0D,eAE/E;AACA;AACAZ,SAAS,CAAC,UAAM,CACZa,iBAAiB,GAEpB,CAHQ,CAGN,EAHM,CAAT,CAKA,GAAMA,CAAAA,iBAAiB,2FAAG,iBAAOL,UAAP,CAAmBC,YAAnB,+NAEdK,WAFc,CAEA,EAFA,CAGlB,GAAIN,UAAU,EAAIC,YAAlB,CAAgCK,WAAW,CAAG,CAAEL,YAAY,CAAEA,YAAhB,CAA8BD,UAAU,CAAEA,UAA1C,CAAd,CAChCO,OAAO,CAACC,GAAR,CAAYF,WAAZ,EAJkB,sBAK+BT,CAAAA,KAAK,CAACY,GAAN,CAAU,uBAAV,CAAmC,CAAEC,MAAM,CAAEJ,WAAV,CAAnC,CAL/B,8EAKVK,IALU,CAKFC,OALE,uBAKFA,OALE,CAKOC,WALP,uBAKOA,WALP,CAMdC,iBANc,CAMMC,IAAI,CAACC,KAAL,CAAWH,WAAX,CANN,CAOlBN,OAAO,CAACC,GAAR,CAAYI,OAAZ,EACA;AACAR,eAAe,CAACU,iBAAD,CAAf,CATkB,sFAWZG,CAAAA,KAAK,CAAC,kDAAD,CAXO,sEAAH,kBAAjBZ,CAAAA,iBAAiB,iDAAvB,CAcA;AACAb,SAAS,CAAC,UAAM,CACZa,iBAAiB,CAACL,UAAD,CAAaC,YAAb,CAAjB,CACAM,OAAO,CAACC,GAAR,CAAY,WAAZ,EACAN,SAAS,CAAC,KAAD,CAAT,CACH,CAJQ,CAIN,CAACF,UAAD,CAJM,CAAT,CAKA;AACA;AACA;AACA;AAEA;AACA;AAGA,mBACI,KAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,SAAS,CAAC,KAA1B,UAEKG,YAAY,CAACe,GAAb,CAAiB,SAACC,IAAD,CAAOC,KAAP,qBAEd,KAAC,GAAD,EAAK,EAAE,CAAE,CAAT,CAAY,EAAE,CAAE,CAAhB,uBACI,KAAC,IAAD,EAAM,KAAK,CAAED,IAAb,EAAwBC,KAAxB,CADJ,EAFc,EAAjB,CAFL,EADJ,CAaH","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Item from '../../components/Item';\nimport Box from '@material-ui/core/Box';\n\nimport Grid from \"@material-ui/core/Grid\";\n\nimport axios from '../../api.js';\n\n\n\n\nexport default function HomePage({ isSearch, searchType, searchString ,setSearch}) {\n    const [productInfos, setProductInfos] = useState([]);\n    // let location = useLocation();\n    // console.log(location);\n    useEffect(() => {\n        fetchProductInfos();\n        \n    }, [])\n\n    const fetchProductInfos = async (searchType, searchString) => {\n        try {\n            let queryParams = {};\n            if (searchType && searchString) queryParams = { searchString: searchString, searchType: searchType };\n            console.log(queryParams);\n            const { data: { message, productInfo } } = await axios.get('/api/get-product-info', { params: queryParams });\n            let productInfoObject = JSON.parse(productInfo);\n            console.log(message);\n            //console.log(productInfoObject);\n            setProductInfos(productInfoObject);\n        } catch (error) {\n            throw Error('When fetching product info => Error ' + error);\n        }\n    };\n    //handle searching\n    useEffect(() => {\n        fetchProductInfos(searchType, searchString);\n        console.log(\"searching\");\n        setSearch(false)\n    }, [searchType])\n    // if (isSearch) {\n    //     fetchProductInfos(searchType, searchString);\n    //     console.log(\"searching\");\n    //     setSearch(false)\n\n    // }\n    //handle searching\n\n\n    return (\n        <Grid container direction='row'>\n\n            {productInfos.map((item, index) => (\n\n                <Box mt={8} mx={2} >\n                    <Item props={item} key={index} />\n                </Box>\n\n            ))}\n\n        </Grid>\n    );\n}"]},"metadata":{},"sourceType":"module"}