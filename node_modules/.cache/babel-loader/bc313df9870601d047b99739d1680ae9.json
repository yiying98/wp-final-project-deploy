{"ast":null,"code":"import _defineProperty from\"/Users/laiyiying/Desktop/wp-final-project-deploy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/laiyiying/Desktop/wp-final-project-deploy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/laiyiying/Desktop/wp-final-project-deploy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/laiyiying/Desktop/wp-final-project-deploy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import Container from\"@material-ui/core/Container\";// import {  useTheme } from '@material-ui/core/styles';\nimport CssBaseline from'@material-ui/core/CssBaseline';import Typography from'@material-ui/core/Typography';import FastfoodIcon from'@material-ui/icons/Fastfood';import TextField from'@material-ui/core/TextField';import{Avatar}from\"@material-ui/core\";import Button from\"@material-ui/core/Button\";import Grid from\"@material-ui/core/Grid\";import MultiImageInput from'react-multiple-image-input';import useStyles from'../../assests/style/Style_sale';import axios from'../../api';import{v4}from'uuid';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function NewSalePage(_ref){var _jsx2;var userName=_ref.userName,selectedRow=_ref.selectedRow,setItemEdit=_ref.setItemEdit;console.log(\"sale\");var id=v4();var classes=useStyles();// const theme = useTheme();\nvar _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),open=_React$useState2[0],setOpen=_React$useState2[1];var _useState=useState(selectedRow.productName||\"\"),_useState2=_slicedToArray(_useState,2),item=_useState2[0],setItem=_useState2[1];var _useState3=useState(selectedRow.onSalePrice||0),_useState4=_slicedToArray(_useState3,2),onSalePrice=_useState4[0],setonSalePrice=_useState4[1];var _useState5=useState(selectedRow.originalPrice||0),_useState6=_slicedToArray(_useState5,2),originalPrice=_useState6[0],setOriginalPrice=_useState6[1];var _useState7=useState(selectedRow.address||\"\"),_useState8=_slicedToArray(_useState7,2),address=_useState8[0],setAddress=_useState8[1];var _useState9=useState(selectedRow.traderName||userName),_useState10=_slicedToArray(_useState9,2),traderName=_useState10[0],settradeName=_useState10[1];var _useState11=useState(selectedRow.discription||\"\"),_useState12=_slicedToArray(_useState11,2),discription=_useState12[0],setDiscription=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),messages=_useState14[0],setMessages=_useState14[1];var initdate;var initimages;if(selectedRow.img){initimages=selectedRow.img[0];}else{initimages={};}// var initimages;\n// if (selectedRow.imageUrl) {\n// \tinitimages = selectedRow.imageUrl\n// }\n// else { initimages = {} }\nvar dateNow=new Date();// Creating a new date object with the current date and time\nvar year=dateNow.getFullYear();// Getting current year from the created Date object\nvar monthWithOffset=dateNow.getUTCMonth()+1;// January is 0 by default in JS. Offsetting +1 to fix date for calendar.\nvar month=// Setting current Month number from current Date object\nmonthWithOffset.toString().length<2// Checking if month is < 10 and pre-prending 0 to adjust for date input.\n?\"0\".concat(monthWithOffset):monthWithOffset;var date=dateNow.getUTCDate().toString().length<2// Checking if date is < 10 and pre-prending 0 if not to adjust for date input.\n?\"0\".concat(dateNow.getUTCDate()):dateNow.getUTCDate();var materialDateInput=\"\".concat(year,\"-\").concat(month,\"-\").concat(date);// combining to format for defaultValue or value attribute of material <TextField>\nif(selectedRow.expiredate){initdate=selectedRow.expirationDate.match(/[0-9]{4}-[0-9]{2}-[0-9]{2}/);}else{initdate=materialDateInput;}var _useState15=useState(initdate),_useState16=_slicedToArray(_useState15,2),expirationDate=_useState16[0],setexpirationDate=_useState16[1];var _useState17=useState(selectedRow.quantity),_useState18=_slicedToArray(_useState17,2),quantity=_useState18[0],setQuantity=_useState18[1];var crop={unit:'%',aspect:4/4,width:'100'};var handleAdd=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$post,_yield$axios$post$dat,message,sellitem;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:alert('商品上傳中，請稍等');_context.next=3;return axios.post('/api/create-item',{item:item,onSalePrice:onSalePrice,originalPrice:originalPrice,address:address,traderName:traderName,discription:discription,expirationDate:expirationDate,quantity:quantity,images:images,userName:userName,id:id});case 3:_yield$axios$post=_context.sent;_yield$axios$post$dat=_yield$axios$post.data;message=_yield$axios$post$dat.message;sellitem=_yield$axios$post$dat.sellitem;if(!sellitem){setMessages(message);alert('新增錯誤：'+message);}else{setMessages(message);alert('新增商品: '+message);setItemEdit(false);}case 8:case\"end\":return _context.stop();}}},_callee);}));return function handleAdd(){return _ref2.apply(this,arguments);};}();//const [images, setImages] = useState(selectedRow.imageUrl || \"\");\nvar _useState19=useState(initimages),_useState20=_slicedToArray(_useState19,2),images=_useState20[0],setImages=_useState20[1];var handleHookChange=function handleHookChange(func){return function(event){func(event.target.value);};};var handleReg=function handleReg(event){event.preventDefault();setItem(\"\");setImages({});setQuantity(0);setAddress(\"\");settradeName(\"\");setonSalePrice(0);setOriginalPrice(0);setDiscription('');setexpirationDate(materialDateInput);};// const handleDrawerOpen = () => {\n// \tsetOpen(true);\n// };\n// const handleDrawerClose = () => {\n// \tsetOpen(false);\n// };\nreturn/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Container,{component:\"main\",maxWidth:\"xs\",children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsxs(\"div\",{className:classes.paper,children:[/*#__PURE__*/_jsx(Avatar,{className:classes.avatar,children:/*#__PURE__*/_jsx(FastfoodIcon,{})}),/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"\\u4E0A\\u67B6\\u5546\\u54C1\"}),/*#__PURE__*/_jsx(\"form\",{className:classes.form,onSubmit:handleReg,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{autoComplete:\"off\",name:\"item\",variant:\"outlined\",required:true,fullWidth:true,id:\"item\",label:\"\\u5546\\u54C1\\u540D\\u7A31\",autoFocus:true,value:item,onChange:handleHookChange(setItem)})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",required:true,fullWidth:true,id:\"quantity\",label:\"\\u6578\\u91CF\",name:\"quantity\",type:\"number\",autoComplete:\"off\",value:quantity,onChange:handleHookChange(setQuantity)})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{autoComplete:\"off\",name:\"originalprice\",variant:\"outlined\",required:true,fullWidth:true,id:\"originalprice\",label:\"\\u539F\\u50F9\",autoFocus:true,value:originalPrice,type:\"number\",inputProps:{min:0},onChange:handleHookChange(setOriginalPrice)})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",required:true,fullWidth:true,id:\"onsaleprice\",label:\"\\u7279\\u50F9\",name:\"onsaleprice\",autoComplete:\"off\",type:\"number\",inputProps:{min:0},value:onSalePrice,onChange:handleHookChange(setonSalePrice)})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",required:true,fullWidth:true,id:\"address\",label:\"\\u5546\\u5BB6\\u5730\\u5740\",name:\"address\",autoComplete:\"off\",value:address,onChange:handleHookChange(setAddress)})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,(_jsx2={variant:\"outlined\",required:true,fullWidth:true,name:\"expiredate\",label:\"\\u8CDE\\u5473\\u671F\\u9650\",type:\"expiredate\",id:\"expiredate\",autoComplete:\"off\"},_defineProperty(_jsx2,\"type\",\"date\"),_defineProperty(_jsx2,\"value\",expirationDate),_defineProperty(_jsx2,\"onChange\",handleHookChange(setexpirationDate)),_jsx2))}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",required:true,fullWidth:true,name:\"discription\",label:\"\\u5546\\u54C1\\u63CF\\u8FF0\",type:\"discription\",id:\"discription\",autoComplete:\"off\",value:discription,onChange:handleHookChange(setDiscription)})}),/*#__PURE__*/_jsx(Grid,{container:true,children:/*#__PURE__*/_jsxs(Grid,{item:true,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"\\u7167\\u7247\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h7\",children:\"\\u7B2C\\u4E00\\u5F35\\u8ACB\\u653E\\u5165\\u5546\\u54C1\\u7167\\uFF0C\\u7B2C\\u4E8C\\u5F35\\u8ACB\\u653E\\u5165\\u5546\\u5BB6\\u7167\"}),/*#__PURE__*/_jsx(MultiImageInput,{max:2,images:images,setImages:setImages,cropConfig:{crop:crop,ruleOfThirds:true}})]})}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"secondary\",className:classes.submit,onClick:handleAdd,children:\"\\u9001\\u51FA\"})]})})]})]})});}","map":{"version":3,"sources":["/Users/laiyiying/Desktop/wp-final-project-deploy/src/containers/pages/SalePage.js"],"names":["React","useState","Container","CssBaseline","Typography","FastfoodIcon","TextField","Avatar","Button","Grid","MultiImageInput","useStyles","axios","v4","NewSalePage","userName","selectedRow","setItemEdit","console","log","id","classes","open","setOpen","productName","item","setItem","onSalePrice","setonSalePrice","originalPrice","setOriginalPrice","address","setAddress","traderName","settradeName","discription","setDiscription","messages","setMessages","initdate","initimages","img","dateNow","Date","year","getFullYear","monthWithOffset","getUTCMonth","month","toString","length","date","getUTCDate","materialDateInput","expiredate","expirationDate","match","setexpirationDate","quantity","setQuantity","crop","unit","aspect","width","handleAdd","alert","post","images","data","message","sellitem","setImages","handleHookChange","func","event","target","value","handleReg","preventDefault","paper","avatar","form","min","ruleOfThirds","submit"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport Container from \"@material-ui/core/Container\";\n// import {  useTheme } from '@material-ui/core/styles';\n\nimport CssBaseline from '@material-ui/core/CssBaseline';\n\nimport Typography from '@material-ui/core/Typography';\n\nimport FastfoodIcon from '@material-ui/icons/Fastfood';\n\nimport TextField from '@material-ui/core/TextField';\n\nimport { Avatar } from \"@material-ui/core\";\n\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\n\nimport MultiImageInput from 'react-multiple-image-input';\nimport useStyles from '../../assests/style/Style_sale';\nimport axios from '../../api';\nimport {v4} from 'uuid';\n\n\n\n\nexport default function NewSalePage({ userName, selectedRow, setItemEdit }) {\n\tconsole.log(\"sale\")\n\tconst id = v4();\n\tconst classes = useStyles();\n\t// const theme = useTheme();\n\tconst [open, setOpen] = React.useState(false);\n\tconst [item, setItem] = useState(selectedRow.productName || \"\");\n\tconst [onSalePrice, setonSalePrice] = useState(selectedRow.onSalePrice || 0);\n\tconst [originalPrice, setOriginalPrice] = useState(selectedRow.originalPrice || 0);\n\tconst [address, setAddress] = useState(selectedRow.address || \"\");\n\tconst [traderName, settradeName] = useState(selectedRow.traderName || userName);\n\tconst [discription, setDiscription] = useState(selectedRow.discription || \"\");\n\tconst [messages, setMessages] = useState('');\n\n\tvar initdate;\n\tvar initimages;\n    if (selectedRow.img){\n      initimages=selectedRow.img[0]\n    }\n    else{initimages={}}\n\n\t// var initimages;\n\t// if (selectedRow.imageUrl) {\n\t// \tinitimages = selectedRow.imageUrl\n\t// }\n\t// else { initimages = {} }\n\n\n\tconst dateNow = new Date(); // Creating a new date object with the current date and time\n\tconst year = dateNow.getFullYear(); // Getting current year from the created Date object\n\tconst monthWithOffset = dateNow.getUTCMonth() + 1; // January is 0 by default in JS. Offsetting +1 to fix date for calendar.\n\tconst month = // Setting current Month number from current Date object\n\t\tmonthWithOffset.toString().length < 2 // Checking if month is < 10 and pre-prending 0 to adjust for date input.\n\t\t\t? `0${monthWithOffset}`\n\t\t\t: monthWithOffset;\n\tconst date =\n\t\tdateNow.getUTCDate().toString().length < 2 // Checking if date is < 10 and pre-prending 0 if not to adjust for date input.\n\t\t\t? `0${dateNow.getUTCDate()}`\n\t\t\t: dateNow.getUTCDate();\n\n\tconst materialDateInput = `${year}-${month}-${date}`; // combining to format for defaultValue or value attribute of material <TextField>\n\n\n\tif (selectedRow.expiredate) { initdate = selectedRow.expirationDate.match(/[0-9]{4}-[0-9]{2}-[0-9]{2}/) }\n\telse { initdate = materialDateInput }\n\tconst [expirationDate, setexpirationDate] = useState(initdate);\n\tconst [quantity, setQuantity] = useState(selectedRow.quantity);\n\tconst crop = {\n\t\tunit: '%',\n\t\taspect: 4 / 4,\n\t\twidth: '100'\n\t};\n\n\n\n\n\n\tconst handleAdd = async () => {\n\t\talert('商品上傳中，請稍等')\n\t\tconst {\n\t\t\tdata: { message, sellitem },\n\t\t} = await axios.post('/api/create-item', {\n\t\t\titem,\n\t\t\tonSalePrice,\n\t\t\toriginalPrice,\n\t\t\taddress,\n\t\t\ttraderName,\n\t\t\tdiscription,\n\t\t\texpirationDate,\n\t\t\tquantity,\n\t\t\timages,\n\t\t\tuserName,\n\t\t\tid\n\t\t});\n\t\tif (!sellitem) { setMessages(message); alert('新增錯誤：' + message) }\n\t\telse { setMessages(message); alert('新增商品: ' + message); setItemEdit(false) }\n\n\t};\n\t//const [images, setImages] = useState(selectedRow.imageUrl || \"\");\n\tconst [images, setImages] = useState(initimages);\n\tconst handleHookChange = (func) => (event) => {\n\t\tfunc(event.target.value);\n\t};\n\tconst handleReg = (event) => {\n\t\tevent.preventDefault();\n\t\tsetItem(\"\");\n\t\tsetImages({});\n\t\tsetQuantity(0);\n\t\tsetAddress(\"\");\n\t\tsettradeName(\"\");\n\t\tsetonSalePrice(0);\n\t\tsetOriginalPrice(0);\n\t\tsetDiscription('');\n\t\tsetexpirationDate(materialDateInput);\n\n\t};\n\t// const handleDrawerOpen = () => {\n\t// \tsetOpen(true);\n\t// };\n\n\t// const handleDrawerClose = () => {\n\t// \tsetOpen(false);\n\t// };\n\n\treturn (\n\t\t<>\n\t<Container component=\"main\" maxWidth=\"xs\">\n\t\t\t<CssBaseline />\n\t\t\t\t<div className={classes.paper}>\n\t\t\t\t\t<Avatar className={classes.avatar}>\n\t\t\t\t\t\t<FastfoodIcon />\n\t\t\t\t\t</Avatar>\n\t\t\t\t\t<Typography component=\"h1\" variant=\"h5\">\n\t\t\t\t\t\t上架商品\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<form className={classes.form} onSubmit={handleReg}>\n\t\t\t\t\t\t<Grid container spacing={2}>\n\t\t\t\t\t\t\t<Grid item xs={12} sm={6}>\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\t\t\tname=\"item\"\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\tid=\"item\"\n\t\t\t\t\t\t\t\t\tlabel=\"商品名稱\"\n\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t\tvalue={item}\n\t\t\t\t\t\t\t\t\tonChange={handleHookChange(setItem)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item xs={12} sm={6}>\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\tid=\"quantity\"\n\t\t\t\t\t\t\t\t\tlabel=\"數量\"\n\t\t\t\t\t\t\t\t\tname=\"quantity\"\n\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\t\t\tvalue={quantity}\n\t\t\t\t\t\t\t\t\tonChange={handleHookChange(setQuantity)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t{/* <Grid item xs={12}>\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\tid=\"tradername\"\n\t\t\t\t\t\t\t\t\tlabel=\"商家名稱\"\n\t\t\t\t\t\t\t\t\tname=\"tradername\"\n\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\t\t\tvalue={traderName}\n\t\t\t\t\t\t\t\t\tonChange={handleHookChange(settradeName)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Grid> */}\n\t\t\t\t\t\t\t<Grid item xs={12} sm={6}>\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\t\t\tname=\"originalprice\"\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\tid=\"originalprice\"\n\t\t\t\t\t\t\t\t\tlabel=\"原價\"\n\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t\tvalue={originalPrice}\n\t\t\t\t\t\t\t\t\ttype='number'\n\t\t\t\t\t\t\t\t\tinputProps={{ min: 0 }}\n\t\t\t\t\t\t\t\t\tonChange={handleHookChange(setOriginalPrice)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item xs={12} sm={6}>\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\tid=\"onsaleprice\"\n\t\t\t\t\t\t\t\t\tlabel=\"特價\"\n\t\t\t\t\t\t\t\t\tname=\"onsaleprice\"\n\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\tinputProps={{ min: 0 }}\n\t\t\t\t\t\t\t\t\tvalue={onSalePrice}\n\t\t\t\t\t\t\t\t\tonChange={handleHookChange(setonSalePrice)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\tid=\"address\"\n\t\t\t\t\t\t\t\t\tlabel=\"商家地址\"\n\t\t\t\t\t\t\t\t\tname=\"address\"\n\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\t\t\tvalue={address}\n\t\t\t\t\t\t\t\t\tonChange={handleHookChange(setAddress)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\tname=\"expiredate\"\n\t\t\t\t\t\t\t\t\tlabel=\"賞味期限\"\n\t\t\t\t\t\t\t\t\ttype=\"expiredate\"\n\t\t\t\t\t\t\t\t\tid=\"expiredate\"\n\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\t\t\ttype=\"date\"\n\t\t\t\t\t\t\t\t\tvalue={expirationDate}\n\t\t\t\t\t\t\t\t\tonChange={handleHookChange(setexpirationDate)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\tname=\"discription\"\n\t\t\t\t\t\t\t\t\tlabel=\"商品描述\"\n\t\t\t\t\t\t\t\t\ttype=\"discription\"\n\t\t\t\t\t\t\t\t\tid=\"discription\"\n\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\t\t\tvalue={discription}\n\t\t\t\t\t\t\t\t\tonChange={handleHookChange(setDiscription)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\n\n\t\t\t\t\t\t<Grid container>\n\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t<Typography variant=\"h6\">\n\t\t\t\t\t\t\t\t\t照片\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t<Typography variant=\"h7\">\n\t\t\t\t\t\t\t\t\t第一張請放入商品照，第二張請放入商家照\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t<MultiImageInput\n\t\t\t\t\t\t\t\t\tmax={2}\n\t\t\t\t\t\t\t\t\timages={images}\n\t\t\t\t\t\t\t\t\tsetImages={setImages}\n\t\t\t\t\t\t\t\t\tcropConfig={{ crop, ruleOfThirds: true }}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{/* <img src = {images}></img> */}\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\tclassName={classes.submit}\n\t\t\t\t\t\t\tonClick={handleAdd}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t送出\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</form>\n\n\t\t\t\t</div>\n\n\t\t\t\t</Container>\n\t\t</>\n\t);\n}"]},"metadata":{},"sourceType":"module"}