{"ast":null,"code":"import _regeneratorRuntime from\"/Users/laiyiying/Desktop/wp-final-project-deploy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/laiyiying/Desktop/wp-final-project-deploy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/laiyiying/Desktop/wp-final-project-deploy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/laiyiying/Desktop/wp-final-project-deploy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/laiyiying/Desktop/wp-final-project-deploy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";// import { GlobalContext } from \"../../../../Context/GlobalState\";\n// import ActionType from \"../../../../Context/globalActionType\";\nimport{Avatar,Button,CssBaseline,Container,Grid,Link,TextField,Typography}from\"@material-ui/core\";//import Alert from \"@material-ui/lab/Alert\";\nimport LockOutlinedIcon from\"@material-ui/icons/LockOutlined\";import useStyles from\"../../assests/style/Style\";import axios from'../../api';import{Redirect}from\"react-router-dom\";// import { useHistory } from 'react-router-dom'\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(props){var loggedin=props.loggedin,isLogin=props.isLogin;var classes=useStyles();// const history = useHistory();\n//const { dispatch } = useContext(GlobalContext);\nvar initialState={username:\"\",password:\"\",isSubmit:false,errorMessage:null};var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];//const [isLogin,setLogin] = useState(false)\n// HANDLE ON_CHANGE\nvar handleInputChange=function handleInputChange(event){setData(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},event.target.name,event.target.value));});};// HANDLE LOGIN\nvar handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var _yield$axios$post,message;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();setData(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isSubmit:true,errorMessage:null});});//***********new login */\n_context.next=4;return axios.post('/api/login',{data:data});case 4:_yield$axios$post=_context.sent;message=_yield$axios$post.data.message;if(message==='welcome'){loggedin(true,data.username);// history.push({\n//   pathname:'/',\n//   state : {\n//       id : 1\n//   }});\n}alert(message);//***********new login */\nsetData(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{username:\"\",password:\"\"});});case 9:case\"end\":return _context.stop();}}},_callee);}));return function handleLogin(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Container,{component:\"main\",maxWidth:\"xs\",children:[isLogin&&/*#__PURE__*/_jsx(Redirect,{to:{pathname:\"/homepage\"}}),/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsxs(\"div\",{className:classes.paper,children:[/*#__PURE__*/_jsx(Avatar,{className:classes.avatar,children:/*#__PURE__*/_jsx(LockOutlinedIcon,{})}),/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"Sign in\"}),/*#__PURE__*/_jsxs(\"form\",{className:classes.form,noValidate:true,onSubmit:handleLogin,children:[/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"username\",label:\"Username\"//username\n,name:\"username\",autoComplete:\"off\",autoFocus:true,value:data.username,onChange:handleInputChange}),/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,name:\"password\",label:\"Password\"//password\n,type:\"password\",id:\"password\",autoComplete:\"off\",value:data.password,onChange:handleInputChange}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"secondary\",className:classes.submit,children:\"Sign-In\"}),/*#__PURE__*/_jsxs(Grid,{container:true,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:true,children:/*#__PURE__*/_jsx(Link,{href:\"#\",variant:\"body2\",children:\"Forgot password?\"})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Link,{href:\"/register\",variant:\"body2\",children:\"Don't have an account? Sign Up\"})})]})]})]})]});};export default Login;","map":{"version":3,"sources":["/Users/laiyiying/Desktop/wp-final-project-deploy/src/containers/pages/Login.js"],"names":["React","useState","Avatar","Button","CssBaseline","Container","Grid","Link","TextField","Typography","LockOutlinedIcon","useStyles","axios","Redirect","Login","props","loggedin","isLogin","classes","initialState","username","password","isSubmit","errorMessage","data","setData","handleInputChange","event","prevState","target","name","value","handleLogin","preventDefault","post","message","alert","pathname","paper","avatar","form","submit"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\n// import { GlobalContext } from \"../../../../Context/GlobalState\";\n// import ActionType from \"../../../../Context/globalActionType\";\nimport {\n  Avatar,\n  Button,\n  CssBaseline,\n  Container,\n  Grid,\n  Link,\n  TextField,\n  Typography,\n} from \"@material-ui/core\";\n//import Alert from \"@material-ui/lab/Alert\";\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\nimport useStyles from \"../../assests/style/Style\";\nimport axios from '../../api';\nimport { Redirect } from \"react-router-dom\";\n// import { useHistory } from 'react-router-dom'\nconst Login = (props) => {\n  const {loggedin,isLogin} = props\n  const classes = useStyles();\n  // const history = useHistory();\n  //const { dispatch } = useContext(GlobalContext);\n  const initialState = {\n    username: \"\",\n    password: \"\",\n    isSubmit: false,\n    errorMessage: null,\n  };\n  const [data, setData] = useState(initialState);\n  //const [isLogin,setLogin] = useState(false)\n\n  // HANDLE ON_CHANGE\n  const handleInputChange = (event) => {\n    setData((prevState) => {\n      return {\n        ...prevState,\n        [event.target.name]: event.target.value,\n      };\n    });\n  };\n\n  // HANDLE LOGIN\n  const handleLogin = async(event) => {\n    event.preventDefault();\n    setData((prevState) => {\n      return {\n        ...prevState,\n        isSubmit: true,\n        errorMessage: null,\n      };\n    });\n//***********new login */\n    const {\n      data: { message }\n    } = await axios.post('/api/login', {\n      data\n    })\n    if(message==='welcome') {\n      loggedin(true,data.username);\n      // history.push({\n      //   pathname:'/',\n      //   state : {\n      //       id : 1\n      //   }});\n    }\n    alert (message)\n    //***********new login */\n    setData((prevState) => {\n      return {\n        ...prevState,\n        username: \"\",\n        password: \"\",\n      };\n    });\n  };\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      {isLogin && <Redirect to={{pathname: \"/homepage\"}}/>}\n      <CssBaseline />\n      <div className={classes.paper}>\n        <Avatar className={classes.avatar}>\n          <LockOutlinedIcon />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          Sign in\n        </Typography>\n        {/* {data.errorMessage && (\n          <Alert severity=\"error\">{data.errorMessage}</Alert>\n        )} */}\n        <form className={classes.form} noValidate onSubmit={handleLogin}>\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            id=\"username\"\n            label=\"Username\"//username\n            name=\"username\"\n            autoComplete=\"off\"\n            autoFocus\n            value={data.username}\n            onChange={handleInputChange}\n          />\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            name=\"password\"\n            label=\"Password\"//password\n            type=\"password\"\n            id=\"password\"\n            autoComplete=\"off\"\n            value={data.password}\n            onChange={handleInputChange}\n          />\n          <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            color=\"secondary\"\n            className={classes.submit}\n          >\n            { \"Sign-In\"}\n          </Button>\n          <Grid container>\n            <Grid item xs>\n              <Link href=\"#\" variant=\"body2\">\n                Forgot password?\n              </Link>\n            </Grid>\n            <Grid item>\n              <Link href=\"/register\" variant=\"body2\">\n                {\"Don't have an account? Sign Up\"}\n              </Link>\n            </Grid>\n          </Grid>\n        </form>\n      </div>\n    </Container>\n  );\n};\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}